//##############################################################
//
//  Job options file for TkrRecon test 
//    
//  This job reads a short digiRootdata file (and optionally, an mcRootData file)
//  and processes the digis through TkrRecon.
//
//  Tests are performed in test_TkrRecon
//

// primary DLLs

ApplicationMgr.DLLs+= {"RootIo", "TkrRecon", "TkrUtil"};

// ----------------------------
// setup basic event loop stuff
//
ApplicationMgr.ExtSvc = { 
    "GlastEventSelector/EventSelector" , 
    "EventCnvSvc"
    };
EventPersistencySvc.CnvServices = {"EventCnvSvc"};
EventSelector.Input = "NONE";

// ----------------------------
//  Geometry definition
//

ApplicationMgr.DLLs += {"GlastSvc", "G4Propagator", "G4Generator" };
ApplicationMgr.ExtSvc += { "GlastDetSvc"};

GlastDetSvc.topVolume="LAT"; 

GlastDetSvc.xmlfile="$(XMLGEODBSROOT)/xml/flight/flightSegVols.xml";
//GlastDetSvc.visitorMode="recon";

ApplicationMgr.ExtSvc += { "TkrGeometrySvc", "TkrInitSvc" };

// ----------------------------
//  topalg
//

ApplicationMgr.TopAlg = {
    "mcRootReaderAlg",
    "digiRootReaderAlg",
    "TkrReconAlg",      
    "test_TkrRecon"
    };

ApplicationMgr.ExtSvc += { "TkrGeometrySvc", "TkrInitSvc" };                        

// filters some random badStrips
ApplicationMgr.ExtSvc += { "TkrBadStripsSvc" };
TkrBadStripsSvc.badStripsFile = "$(TKRUTILROOT)/src/test/badStrips.txt";

// Set output level threshold (2=DEBUG, 3=INFO, 4=WARNING, 5=ERROR, 6=FATAL )
MessageSvc.OutputLevel = 3;
ApplicationMgr.EvtMax = 5;
mcRootReaderAlg.mcRootFile="$(TKRRECONROOT)/src/test/muon_mc.root";
digiRootReaderAlg.digiRootFile="$(TKRRECONROOT)/src/test/muon_digi.root";

//==============================================================
//
// End of job options file
//
//##############################################################